<!DOCTYPE html>

<html>
    <head>
        <title>My todolist</title>
        <style>
            a {text-decoration: none; color: black;}
        </style>
    </head>

    <body>
        <h1>My todolist</h1>
        <ul>
        <% todolist.forEach(function(todo, index) { %>
            <li><a href="/todo/delete/<%= index %>">âœ˜</a> <%- todo %> &nbsp;&nbsp; <a href="javascript:showUpdateFields('<%- todo %>', <%= index %>);"><b>(+)</b></a></li>
        <% }); %>
        </ul>

        <form action="/todo/add/" method="post">
            <p>
                <label for="newtodo">What shoud I do?</label>
                <input type="text" name="newtodo" id="newtodo" autofocus />
                <input type="submit" />
            </p>
        </form>
		
		<!--
		  # Form only displays when edit has been selected for a particular item on the list
		  # The fields are preloaded with the data of the selected it.
		-->
		 <form action="/todo/edit/" method="post">
            <div id="updateFields" style="visibility:hidden">
				<input type="hidden" name="todoid" id="todoid" />
				<label for="newtext">Update Text</label>
                <input type="text" name="newtext" id="newtext" />
                <input type="submit" value="Update"/>
			</div>
        </form>
		
		<!--
		  # Form only displays when edit has been selected for a particular item on the list
		  # The fields are preloaded with the data of the selected it.
		-->
		<script>
			function showUpdateFields(todo, index) 
			{
				document.getElementById("todoid").value = index;
				document.getElementById("newtext").value = todo;
				document.getElementById("updateFields").style.visibility = "visible";
			}
		</script>
    </body>
</html>
